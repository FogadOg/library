<%= render 'layouts/drawer' do %>
  <div class="text-[#212121] h-full">
    <div class="px-12">

      <div>
        <div class="drawer drawer-end">
          <input id="review-drawer" type="checkbox" class="drawer-toggle">
          <div class="drawer-content">
            <%= render "navbar" %>

            <div class="space-y-4">
              <h1 class="text-3xl font-bold">Books</h1>
              <div class="filter">
                <input class="btn bg-[#F9F9F9] text-[#BDBDBD] shadow-none border-none filter-reset" type="radio" name="metaframeworks" aria-label="All"/>
                <input class="btn bg-[#F9F9F9] text-[#BDBDBD] shadow-none border-none" type="radio" name="metaframeworks" aria-label="Education"/>
                <input class="btn bg-[#F9F9F9] text-[#BDBDBD] shadow-none border-none" type="radio" name="metaframeworks" aria-label="Business"/>
                <input class="btn bg-[#F9F9F9] text-[#BDBDBD] shadow-none border-none" type="radio" name="metaframeworks" aria-label="Sci-fi"/>
              </div>
            </div>

            <div class="divider"></div>


            <h2 class="text-xl mb-6 font-semibold">Recently added</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              <% @books.each do |book| %>
                <div class="card w-[30rem] shadow-xl">
                  <div class="card-body">
                    <div class="flex space-x-5">
                      <div class="w-1/3">
                        <img src="<%= book.cover_image_url %>" alt="<%= book.title %> book cover" class="rounded-xl">
                      </div>
                      <div class="w-2/3">
                        <div class="h-2/4">
                          <div class="flex">
                            <h3 class="font-semibold text-xl w-7/8"><%= book.title %></h3>
                            <div class="w-1/8">
                              <label class="cursor-pointer">
                                <input type="checkbox" class="hidden peer">
                                <div class="btn p-2 shadow-xl fill-[#BDBDBD] bg-white color-[#BDBDBD] peer-checked:fill-white peer-checked:bg-[#FC674E] peer-checked:border-none rounded-lg">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="" class="bi bi-bookmark-plus-fill peer-checked:fill-white" viewBox="0 0 16 16">
                                    <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m6.5-11a.5.5 0 0 0-1 0V6H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V7H10a.5.5 0 0 0 0-1H8.5z"/>
                                  </svg>
                                </div>
                              </label>
                            </div>
                          </div>
                          <div class="w-7/8 flex justify-center items-center space-x-2">
                            <p>Added by <span class="font-semibold"><%= book.user.email %></span></p>
                          </div>
                          <p class="mt-3"><%= book.description.truncate(100) %></p>
                        </div>
                        <div class="h-1/4 space-x-2 flex items-center">
                          <span class="text-xl font-semibold">
                            <%= book.reviews.average(:rating) || 0 %>
                          </span>
                          <div class="rating rating-sm">
                            <% 5.times do |i| %>
                              <input type="radio" name="rating-<%= book.id %>" class="mask mask-star-2 bg-orange-400" <%= 'checked' if (book.reviews.average(:rating) || 0) > i %> aria-label="<%= i + 1 %> star">
                            <% end %>
                          </div>  
                          <span>(<%= book.reviews.count %> Reviews)</span>
                        </div>
                        <div class="space-x-4 h-1/4 flex items-end">
                          <label for="review-drawer" class="btn py-6 rounded-xl btn-outline text-[#111F4D] border-[#E5E5E7] cursor-pointer">
                            Review
                          </label>
                          <button class="btn py-6 rounded-xl bg-[#111F4D] text-white">Read</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>

          </div>

          <div class="drawer-side">
            <label for="review-drawer" class="drawer-overlay"></label>
            <div class="w-96 p-5 h-full overflow-y-scroll shadow-lg bg-[#F2F2F7] space-y-6">

              <div class="grid justify-center items-center space-y-4">
                <div class="m-auto mb-1">
                  <img src="https://m.media-amazon.com/images/I/71JUJ6pGoIL.jpg" alt="Animal Farm book cover" class="rounded-xl w-40">
                </div>

                <div class="text-center">
                  <h3 class="font-extrabold text-xl">Animal farm</h3>
                  
                  <div class="flex text-sm justify-center items-center space-x-2">
                    <p>
                      Added by 
                      <span class="font-semibold">Fogad</span>
                    </p>
                  </div>

                </div>

                <div class="m-auto">
                  <div class="flex justify-center items-center space-x-3">
                    <div class="rating rating-xs">
                      <input type="radio" name="rating-5" class="mask mask-star-2 bg-orange-400" aria-label="1 star" />
                      <input type="radio" name="rating-5" class="mask mask-star-2 bg-orange-400" aria-label="2 star" checked="checked" />
                      <input type="radio" name="rating-5" class="mask mask-star-2 bg-orange-400" aria-label="3 star" />
                      <input type="radio" name="rating-5" class="mask mask-star-2 bg-orange-400" aria-label="4 star" />
                      <input type="radio" name="rating-5" class="mask mask-star-2 bg-orange-400" aria-label="5 star" />
                    </div>
                    <span>2.0</span>

                  </div>
                  <div class="stats stats-horizontal">
                    <div class="stat">
                      <div class="stat-value text-sm">347</div>
                      <div class="stat-desc">pages</div>
                    </div>

                    <div class="stat">
                      <div class="stat-value text-sm">14</div>
                      <div class="stat-desc">ratings</div>
                    </div>

                    <div class="stat">
                      <div class="stat-value text-sm">7</div>
                      <div class="stat-desc">reviews</div>
                    </div>
                  </div>
                </div>
              </div>

              <div>
                <h3 class="text-xl font-bold mb-2">Short description</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. A reiciendis eius adipisci quo fugiat mollitia fugit vero doloremque totam labore sed, molestias eaque voluptate officia error quam nemo delectus omnis eligendi dolorem animi sequi consectetur repellendus? Quas amet libero explicabo!</p>
              </div>

              <div class="space-y-3">
                <h3 class="text-xl font-bold">Review</h3>
                <div>
                  <p>Rating</p>
                  <div class="rating rating-sm">
                    <input type="radio" name="rating-7" class="mask mask-star-2 bg-orange-400" aria-label="1 star" />
                    <input type="radio" name="rating-7" class="mask mask-star-2 bg-orange-400" aria-label="2 star" checked="checked" />
                    <input type="radio" name="rating-7" class="mask mask-star-2 bg-orange-400" aria-label="3 star" />
                    <input type="radio" name="rating-7" class="mask mask-star-2 bg-orange-400" aria-label="4 star" />
                    <input type="radio" name="rating-7" class="mask mask-star-2 bg-orange-400" aria-label="5 star" />
                  </div>

                </div>

                <div>
                  <p>About</p>
                  <textarea class="textarea textarea-bordered w-full mt-3" placeholder="Write your review..."></textarea>
                  <button class="btn bg-[#111F4D] text-white mt-4 rounded-xl ml-auto">Add review</button>

                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
